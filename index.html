<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Konarak Food & Beverages</title>

<style>
  :root{
    --accent:#f28c2b;
    --dark:#2b2b2b;
    --muted:#666;
    --card:#fff;
    --maxw:1100px;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,Arial,sans-serif;margin:0;background:#fff;color:var(--dark)}
  .topbar{
    background:var(--accent);color:#fff;
    padding:10px 15px;display:flex;justify-content:space-between;align-items:center;
    position:sticky;top:0;z-index:1000;
  }
  .brand{display:flex;align-items:center;gap:10px;cursor:pointer}
  .brand img{width:42px;height:42px;border-radius:6px;object-fit:contain;background:#fff;padding:4px}
  .brand h1{margin:0;font-size:18px}
  .small{color:var(--muted);font-size:13px}

  /* DESKTOP NAV */
  .desktop-nav{
    background:#fff;border-bottom:1px solid #eee;padding:10px 20px;
    display:flex;gap:14px;align-items:center;justify-content:center;
  }
  .desktop-nav a,.desktop-nav button{
    font-size:14px;color:var(--dark);text-decoration:none;background:none;border:0;
    padding:8px 12px;border-radius:6px;cursor:pointer;
  }
  .desktop-nav a:hover,
  .desktop-nav button:hover{background:#f2f2f2}

  .dropdown{position:relative}
  .dropdown-menu{
    position:absolute;top:38px;left:0;width:180px;background:#fff;border-radius:8px;
    box-shadow:0 6px 20px rgba(0,0,0,.12);display:none;z-index:50;
  }
  .dropdown-menu a{
    display:block;padding:10px;text-decoration:none;color:#000;border-radius:6px;
  }
  .dropdown-menu a:hover{background:#f3f3f3}

  /* MOBILE MENU */
  .hamburger{display:none;font-size:26px;color:#fff;background:none;border:0}

  #sidebar{
    position:fixed;top:0;left:-260px;width:260px;height:100%;
    background:#fff;box-shadow:2px 0 10px rgba(0,0,0,.25);
    padding:20px;z-index:9999;transition:left .3s ease;overflow-y:auto;
  }
  #sidebar a,#sidebar button{
    display:block;width:100%;text-align:left;margin:6px 0;padding:12px;
    border:0;background:none;font-size:16px;color:#222;
  }
  .close-btn{
    font-size:22px;background:none;border:0;text-align:right;width:40px;margin-bottom:10px;
  }
  .side-submenu{display:none;padding-left:12px;border-left:2px solid #ddd}

  /* MAIN */
  main{max-width:var(--maxw);margin:auto;padding:20px}
  .card{
    background:#fff;padding:16px;border-radius:10px;
    box-shadow:0 6px 18px rgba(0,0,0,.04);margin-bottom:18px;
  }
  label{font-size:14px;font-weight:600;margin-top:10px}
  input,textarea{
    width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;margin-top:6px;
  }
  button{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer}

  .gallery-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
  .gallery-grid img{width:100%;height:120px;object-fit:cover;border-radius:8px}

  .two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media(max-width:768px){
    .desktop-nav{display:none}
    .hamburger{display:block}
    .two-col{grid-template-columns:1fr}
  }
  @media(min-width:769px){
    #sidebar{display:none}
  }
</style>

</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="brand" onclick="navigate('#home')">
    <img src="logo1.png" onerror="this.style.display='none'">
    <div>
      <h1>Konarak Food & Beverages</h1>
      <div class="small">Cognizant – Hyderabad</div>
    </div>
  </div>

  <button class="hamburger" onclick="openSidebar()">☰</button>
</div>

<!-- MOBILE LEFT SLIDE MENU -->
<div id="sidebar">
  <button class="close-btn" onclick="closeSidebar()">✕</button>

  <a href="#home" onclick="closeSidebar();navigate('#home')">Home</a>
  <a href="#about" onclick="closeSidebar();navigate('#about')">About</a>
  <a href="#gallery" onclick="closeSidebar();navigate('#gallery')">Gallery</a>

  <button onclick="toggleSideMenu('mstaff')">Staff ▾</button>
  <div id="mstaff" class="side-submenu">
    <a href="#staff/application" onclick="closeSidebar();navigate('#staff/application')">Application</a>
    <a href="#staff/login" onclick="closeSidebar();navigate('#staff/login')">Login</a>
  </div>

  <button onclick="toggleSideMenu('mrecords')">Records ▾</button>
  <div id="mrecords" class="side-submenu">
    <a href="https://konarakfb.github.io/form/" target="_blank">Dry Store</a>
    <a href="https://konarakfb.github.io/sales/" target="_blank">Food Sales</a>
  </div>

  <a href="https://konarakfb.github.io/checklist/" target="_blank">FSSAI</a>
  <a href="#contact" onclick="closeSidebar();navigate('#contact')">Contact</a>
</div>

<!-- DESKTOP NAV -->
<nav class="desktop-nav">
  <a href="#home" onclick="navigate('#home')">Home</a>
  <a href="#about" onclick="navigate('#about')">About</a>
  <a href="#gallery" onclick="navigate('#gallery')">Gallery</a>

  <div class="dropdown">
    <button onclick="toggleDropdown('staff-menu')">Staff ▾</button>
    <div id="staff-menu" class="dropdown-menu">
      <a href="#staff/application" onclick="navigate('#staff/application')">Application</a>
      <a href="#staff/login" onclick="navigate('#staff/login')">Login</a>
    </div>
  </div>

  <div class="dropdown">
    <button onclick="toggleDropdown('records-menu')">Records ▾</button>
    <div id="records-menu" class="dropdown-menu">
      <a href="https://konarakfb.github.io/form/" target="_blank">Dry Store</a>
      <a href="https://konarakfb.github.io/sales/" target="_blank">Food Sales</a>
    </div>
  </div>

  <a href="https://konarakfb.github.io/checklist/" target="_blank">FSSAI</a>
  <a href="#contact" onclick="navigate('#contact')">Contact</a>
</nav>

<!-- MAIN -->
<main id="main"></main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
/* SIDEBAR */
function openSidebar(){document.getElementById("sidebar").style.left="0"}
function closeSidebar(){document.getElementById("sidebar").style.left="-260px"}
function toggleSideMenu(id){
  let el=document.getElementById(id);
  el.style.display=el.style.display==="block"?"none":"block";
}

/* DESKTOP DROPDOWN */
function toggleDropdown(id){
  document.querySelectorAll(".dropdown-menu").forEach(m=>{if(m.id!==id)m.style.display="none"});
  let m=document.getElementById(id);
  m.style.display=m.style.display==="block"?"none":"block";
}

/* ROUTING */
function navigate(h){location.hash=h;render();}

/* PAGES */
function render(){
  const h=location.hash||"#home";
  const m=document.getElementById("main");

  if(h==="#about") m.innerHTML=aboutPage();
  else if(h==="#gallery"){ m.innerHTML=galleryPage(); bindGallery(); }
  else if(h.startsWith("#staff/application")){ m.innerHTML=appPage(); bindApp(); }
  else if(h.startsWith("#staff/login")){ m.innerHTML=loginPage(); bindLogin(); }
  else if(h==="#contact"){ m.innerHTML=contactPage(); bindContact(); }
  else m.innerHTML=homePage();
}

/* HOME */
function homePage(){
return `
<div class="card">
  <h2>Welcome to Konarak Food & Beverages</h2>
  <p class="small">We serve Cognizant campuses with food & beverage operations.</p>
  <button onclick="navigate('#staff/application')">Apply for Staff</button>
</div>`;
}

/* ABOUT */
function aboutPage(){
return `
<div class="card">
  <h2>About Us</h2>
  <p class="small">Konarak Food & Beverages provides canteen operations inside Cognizant campuses.</p>
  <p class="small"><b>FSSAI:</b> 13624013000747</p>
</div>`;
}

/* GALLERY */
function galleryPage(){
return `
<h2>Gallery</h2>
<div class="card">
  <input id="gallery-upload" type="file" multiple>
  <div id="gallery-grid" class="gallery-grid"></div>
</div>`;
}
function bindGallery(){
  let up=document.getElementById("gallery-upload");
  let grid=document.getElementById("gallery-grid");
  let list=JSON.parse(localStorage.getItem("gal")||"[]");
  grid.innerHTML=list.map(img=>`<img src="${img}">`).join("");

  up.onchange=async e=>{
    for(let f of e.target.files){
      let r=await fileToData(f,800);
      list.unshift(r);
    }
    localStorage.setItem("gal",JSON.stringify(list.slice(0,80)));
    grid.innerHTML=list.map(img=>`<img src="${img}">`).join("");
  };
}

/* STAFF APPLICATION */
function appPage(){
return `
<h2>Staff Application</h2>
<div class="card">
  <label>Name</label><input id="aname">
  <label>Mobile</label><input id="amobile">
  <label>Email</label><input id="aemail">
  <label>Address</label><textarea id="aaddress"></textarea>
  <label>Position</label><input id="aposition">
  <label>Date</label><input id="adate" type="date">

  <button id="saveapp">Save</button>
</div>`;
}
function bindApp(){
  document.getElementById("saveapp").onclick=()=>{
    let obj={
      name:val("aname"),
      mobile:val("amobile"),
      email:val("aemail"),
      address:val("aaddress"),
      position:val("aposition"),
      date:val("adate")
    };
    let arr=JSON.parse(localStorage.getItem("apps")||"[]");
    arr.unshift(obj);
    localStorage.setItem("apps",JSON.stringify(arr));
    alert("Saved.");
  };
}

/* LOGIN */
function loginPage(){
return `
<h2>Staff Login</h2>
<div class="card">
  <label>Email</label><input id="luser">
  <label>Password</label><input id="lpass">
  <button id="llogin">Login</button>
  <button id="lreg">Register</button>
</div>`;
}
function bindLogin(){
  document.getElementById("lreg").onclick=()=>{
    let u=val("luser"),p=val("lpass");
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    users[u]=p; localStorage.setItem("users",JSON.stringify(users));
    alert("Registered");
  };
  document.getElementById("llogin").onclick=()=>{
    let u=val("luser"),p=val("lpass");
    let users=JSON.parse(localStorage.getItem("users")||"{}");
    alert(users[u]===p?"Login OK":"Invalid");
  };
}

/* CONTACT */
function contactPage(){
return `
<h2>Contact</h2>
<div class="card">
  <label>Name</label><input id="cname">
  <label>Email</label><input id="cemail">
  <label>Message</label><textarea id="cmsg"></textarea>
  <button id="csend">Send</button>
</div>`;
}
function bindContact(){
  document.getElementById("csend").onclick=()=>{
    let msgs=JSON.parse(localStorage.getItem("contact")||"[]");
    msgs.push({name:val("cname"),email:val("cemail"),msg:val("cmsg")});
    localStorage.setItem("contact",JSON.stringify(msgs));
    alert("Saved locally.");
  };
}

/* UTIL */
function val(id){return document.getElementById(id).value.trim();}
function fileToData(file,max){
  return new Promise(res=>{
    let r=new FileReader();
    r.onload=e=>{
      let img=new Image();
      img.onload=()=>{
        let w=img.width,h=img.height;
        if(w>max||h>max){
          let s=max/Math.max(w,h);w*=s;h*=s;
        }
        let c=document.createElement("canvas");
        c.width=w;c.height=h;
        c.getContext("2d").drawImage(img,0,0,w,h);
        res(c.toDataURL("image/jpeg",0.7));
      };
      img.src=e.target.result;
    };
    r.readAsDataURL(file);
  });
}

render();
</script>

</body>
</html>
